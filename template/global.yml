# port: 7890 # HTTP(S) ä»£ç†æœåŠ¡å™¨ç«¯å£
# socks-port: 7891 # SOCKS5 ä»£ç†ç«¯å£
mixed-port: 10801 # HTTP(S) å’Œ SOCKS ä»£ç†æ··åˆç«¯å£
# redir-port: 7892 # é€æ˜ä»£ç†ç«¯å£ï¼Œç”¨äº Linux å’Œ MacOSï¼ˆéœ€è¦é…åˆauto-redirect:trueä½¿ç”¨ï¼Œä½œä¸ºæ—è·¯ç½‘å…³ï¼‰

# Transparent proxy server port for Linux (TProxy TCP and TProxy UDP)
# tproxy-port: 7893

bind-address: "*" # ç»‘å®š IP åœ°å€ï¼Œä»…ä½œç”¨äº allow-lan ä¸º trueï¼Œ'*'è¡¨ç¤ºæ‰€æœ‰åœ°å€
authentication: # http,socks å…¥å£çš„éªŒè¯ç”¨æˆ·åï¼Œå¯†ç 
  - "username:password"
skip-auth-prefixes: # è®¾ç½®è·³è¿‡éªŒè¯çš„ IP æ®µ
  - 127.0.0.1/8
  - ::1/128

# å¼€å¯ç»Ÿä¸€å»¶è¿Ÿæ—¶ï¼Œä¼šè®¡ç®— RTTï¼Œä»¥æ¶ˆé™¤è¿æ¥æ¡æ‰‹ç­‰å¸¦æ¥çš„ä¸åŒç±»å‹èŠ‚ç‚¹çš„å»¶è¿Ÿå·®å¼‚
unified-delay: true

# å±€åŸŸç½‘è¿æ¥é…ç½®
allow-lan: true # å…è®¸å±€åŸŸç½‘è¿æ¥
lan-allowed-ips: # å…è®¸å±€åŸŸç½‘è¿æ¥çš„IPç½‘æ®µï¼Œä»…ä½œç”¨äº allow-lan ä¸º true, é»˜è®¤å€¼ä¸º 0.0.0.0/0 å’Œ::/0
  - 0.0.0.0/0
  - ::/0
# ğŸ’¡ clashæœåŠ¡çš„ç¬¬ä¸€å…¥å£ï¼Œä¼˜å…ˆçº§æœ€é«˜
lan-disallowed-ips: # ç¦æ­¢å±€åŸŸç½‘è¿æ¥çš„IPç½‘æ®µï¼Œé»‘åå•ä¼˜å…ˆçº§é«˜äºç™½åå•ï¼Œé»˜è®¤å€¼å…è®¸æ‰€æœ‰
  - 192.168.0.3/32

#  find-process-mode has 3 values:always, strict, off
#  - always, å¼€å¯ï¼Œå¼ºåˆ¶åŒ¹é…æ‰€æœ‰è¿›ç¨‹
#  - strict, é»˜è®¤ï¼Œç”± mihomo åˆ¤æ–­æ˜¯å¦å¼€å¯
#  - off, ä¸åŒ¹é…è¿›ç¨‹ï¼Œæ¨èåœ¨è·¯ç”±å™¨ä¸Šä½¿ç”¨æ­¤æ¨¡å¼
find-process-mode: strict

mode: rule

log-level: debug # æ—¥å¿—ç­‰çº§ silent/error/warning/info/debug

ipv6: true # å¼€å¯ IPv6 æ€»å¼€å…³ï¼Œå…³é—­é˜»æ–­æ‰€æœ‰ IPv6 é“¾æ¥å’Œå±è”½ DNS è¯·æ±‚ AAAA è®°å½•

# å¤–éƒ¨æ‰©å±•APIé…ç½®
tls:
  certificate: string # è¯ä¹¦ PEM æ ¼å¼ï¼Œæˆ–è€… è¯ä¹¦çš„è·¯å¾„
  private-key: string # è¯ä¹¦å¯¹åº”çš„ç§é’¥ PEM æ ¼å¼ï¼Œæˆ–è€…ç§é’¥è·¯å¾„
  custom-certifactes:
    - |
      -----BEGIN CERTIFICATE-----
      format/pem...
      -----END CERTIFICATE-----

external-controller: 0.0.0.0:9093 # RESTful API ç›‘å¬åœ°å€
external-controller-tls: 0.0.0.0:9443 # RESTful API HTTPS ç›‘å¬åœ°å€ï¼Œéœ€è¦é…ç½® tls éƒ¨åˆ†é…ç½®æ–‡ä»¶
# secret: "123456" # `Authorization:Bearer ${secret}`

# RESTful API Unix socket ç›‘å¬åœ°å€ï¼ˆ windowsç‰ˆæœ¬å¤§äº17063ä¹Ÿå¯ä»¥ä½¿ç”¨ï¼Œå³å¤§äºç­‰äº1803/RS4ç‰ˆæœ¬å³å¯ä½¿ç”¨ ï¼‰
# ï¼ï¼ï¼æ³¨æ„ï¼š ä»Unix socketè®¿é—®apiæ¥å£ä¸ä¼šéªŒè¯secretï¼Œ å¦‚æœå¼€å¯è¯·è‡ªè¡Œä¿è¯å®‰å…¨é—®é¢˜ ï¼ï¼ï¼
# æµ‹è¯•æ–¹æ³•ï¼š curl -v --unix-socket "mihomo.sock" http://localhost/
external-controller-unix: mihomo.sock

# tcp-concurrent: true # TCP å¹¶å‘è¿æ¥æ‰€æœ‰ IP, å°†ä½¿ç”¨æœ€å¿«æ¡æ‰‹çš„ TCP

# é…ç½® WEB UI ç›®å½•ï¼Œä½¿ç”¨ http://{{external-controller}}/ui è®¿é—®
external-ui: /path/to/ui/folder/
external-ui-name: xd
external-ui-url: "https://github.com/MetaCubeX/metacubexd/archive/refs/heads/gh-pages.zip"

# åœ¨RESTful APIç«¯å£ä¸Šå¼€å¯DOHæœåŠ¡å™¨
# ï¼ï¼ï¼è¯¥URLä¸ä¼šéªŒè¯secretï¼Œ å¦‚æœå¼€å¯è¯·è‡ªè¡Œä¿è¯å®‰å…¨é—®é¢˜ ï¼ï¼ï¼
external-doh-server: /dns-query

# interface-name: en0 # è®¾ç½®å‡ºå£ç½‘å¡

# å…¨å±€TLSæŒ‡çº¹ï¼Œä¼˜å…ˆä½äºproxyå†…çš„client-fingerprintã€‚
# ä½œç”¨ï¼šclashå®¢æˆ·ç«¯ - ä»£ç†èŠ‚ç‚¹ - ç›®æ ‡æœåŠ¡å™¨è¿›è¡ŒTLSæ¡æ‰‹æ—¶ï¼Œclashæ¨¡æ‹Ÿä¸åŒçš„æµè§ˆå™¨çš„åŠ å¯†å¥—ä»¶æ‰©å±•...ç­‰æµè§ˆå™¨ç‰¹å¾ï¼Œä»è€Œè®©ç›®æ ‡æœåŠ¡å™¨è®¤ä¸ºåœ¨ç›´æ¥ä¸å®¢æˆ·ç«¯é€šä¿¡
# å¯é€‰ï¼š "chrome","firefox","safari","ios","random","none" options.
# Utls is currently support TLS transport in TCP/grpc/WS/HTTP for VLESS/Vmess and trojan.
global-client-fingerprint: chrome

#  TCP keep alive interval
keep-alive-interval: 15

# ï¼ˆä»…ç”¨äºLinuxï¼‰é…ç½® fwmarkã€‚å¯ä»¥é¢å¤–åœ¨è·¯ç”±è¡¨(iptables)ä¸Šé…ç½®clashå‡ºç«™åçš„è‡ªå®šä¹‰åˆ†æµæ–¹å¼
# routing-mark:6666 
experimental:
  # Disable quic-go GSO support. This may result in reduced performance on Linux.
  # This is not recommended for most users.
  # Only users encountering issues with quic-go's internal implementation should enable this,
  # and they should disable it as soon as the issue is resolved.
  # This field will be removed when quic-go fixes all their issues in GSO.
  # This equivalent to the environment variable QUIC_GO_DISABLE_GSO=1.
  #quic-go-disable-gso: true

profile: # å­˜å‚¨ select é€‰æ‹©è®°å½•
  store-selected: false

  # æŒä¹…åŒ– fake-ip
  store-fake-ip: true

#ebpf é…ç½®
ebpf:
  auto-redir: # redirect æ¨¡å¼ï¼Œä»…æ”¯æŒ TCP
    - eth0
  redirect-to-tun: # UDP+TCP ä½¿ç”¨è¯¥åŠŸèƒ½è¯·å‹¿å¯ç”¨ auto-route
    - eth0
