# å®Œæ•´é…ç½®å‚è€ƒï¼šhttps://github.com/MetaCubeX/mihomo/blob/Meta/docs/config.yaml

# DNSå°ç¦åŸç†ï¼ˆå·²çŸ¥å¤§æ¦‚ç‡è¢«å°çš„DOT/DOHï¼Œéœ€è¦æ ¹æ®æœ¬åœ°ISPè‡ªè¡Œæµ‹è¯•ï¼‰
# ğŸ¤” å¼ºçƒˆæ¨èä¸è¦å†™åŸŸåå½¢å¼çš„DOT/DOHï¼Œæœ‰äº›æµ·å¤–åŸŸåå¯¹åº”çš„å¤šä¸ªIPéƒ½å·²è¢«å°ç¦ï¼Œåªæœ‰ä¸€ä¸ªIPå¯ç”¨ï¼Œå¯èƒ½å› ä¸ºè¶…å‡ºDNSæŸ¥è¯¢æ—¶é—´ä»¥å¤±è´¥ç»“æŸï¼ˆè¿˜æ²¡æŸ¥åˆ°å¯ä»¥è®¿é—®çš„DNSï¼‰

# DNSæ•´ä½“æ€è·¯
# 1. DOT IPè®¿é—®åšå…œåº•å¤„ç†ï¼šéœ€è¦å›½å¤–DNSä¸”ISPæ— æ³•æ§åˆ¶çš„ï¼ˆä¸æ˜¯ç‰¹åˆ«åœ¨æ„éšç§å›½å†…ä¹Ÿå¯ä»¥ï¼‰
#     2.0 è§£æä»£ç†åŸŸåçš„DNSï¼šç”±äºISPç»å¸¸ä¼šæ±¡æŸ“ä»£ç†åŸŸåï¼Œæ‰€ä»¥éœ€è¦DOT/DOHè®¿é—®
#     2.1 é»˜è®¤DNSï¼šå›½å†…çš„æ™®é€šDNSå¿«é€Ÿè®¿é—®å›½å†…ç«™ç‚¹
#     2.2 ä¸€å®šèŒƒå›´çš„å›½å†…åŸŸåç­–ç•¥ï¼šå¿«é€Ÿè®¿é—®
#     2.3 ä¸€å®šèŒƒå›´çš„å›½å¤–åŸŸåç­–ç•¥ï¼šéœ€è¦ç”¨DOT/DOHè®¿é—®ï¼Œé¿å…DNSæ³„æ¼ï¼ˆä¸å¸Œæœ›ISPçŸ¥é“æˆ‘è®¿é—®ä»€ä¹ˆç«™ç‚¹ï¼‰

# å¸¸ç”¨DNSæœåŠ¡
# Yandex DNSï¼šä¿„ç½—æ–¯æœ€å¤§çš„æœç´¢å¼•æ“
  # tls://77.88.8.8
# è…¾è®¯äº‘
  # tls://dot.pub
# é˜¿é‡Œäº‘
  # dns.alidns.com
  # 223.5.5.5
  # 223.6.6.6
# GoogleDNS
  # tls://8.8.8.8ï¼ˆå¤§æ¦‚ç‡å°ç¦ï¼‰
  # tls://8.8.8.8
  # tls://dns.google
# clouflare
  # tls://1.1.1.1 ï¼ˆå¤§æ¦‚ç‡å°ç¦ï¼‰
  # tls://1.0.0.1ï¼ˆå°æ¦‚ç‡å°ç¦ï¼‰
  # https://1.1.1.1/dns-query ï¼ˆå¤§æ¦‚ç‡å°ç¦ï¼‰
  # https://1.0.0.1/dns-queryï¼ˆå°æ¦‚ç‡å°ç¦ï¼‰
  # tls://one.one.one.one(å¯ç”¨)
  # tls://security.cloudflare-dns.com(å¯ç”¨)
dns:
  use-system-hosts: false
  enable: true
  ipv6: true
  use-hosts: true
  respect-rules: false # dnsæ ¹æ®rulesä»£ç†ï¼Œè®©ä»£ç†æœåŠ¡å™¨å¸®åŠ©èµ°nameserverã€fallback...
  enhanced-mode: fake-ip
  # åœ¨é»˜è®¤fake-ip-mode: blacklistä¸‹æ‰€æœ‰æœªåœ¨fake-ip-filteråŒ¹é…çš„åœ°å€ï¼Œå…¨éƒ¨è¿”å›fake-ip
  # åœ¨é»˜è®¤fake-ip-mode: whitelistä¸‹æ‰€æœ‰åœ¨fake-ip-filteråŒ¹é…çš„åœ°å€ï¼Œå…¨éƒ¨è¿”å›fake-ip
  # fake-ip-filter:
    # - 1.1.1.1
  default-nameserver: # å…œåº•nameserverã€proxy-server-nameserver DNSæ˜¯åŸŸåçš„æƒ…å†µå¦‚tls://åŸŸåï¼ˆDOTã€DOHï¼‰
    - tls://1.12.12.12
    - tls://8.8.4.4
    - tls://1.0.0.1
  proxy-server-nameserver: # ç”¨äºä»£ç†æœåŠ¡å™¨åŸŸåè¿›è¡ŒDNSæŸ¥è¯¢ï¼Œè€ŒæŒ‡å®šçš„DNSæœåŠ¡åˆ—è¡¨ï¼ˆæŸäº›ä»£ç†DNSä¼šè¢«ISPæ›´æ”¹ï¼Œæœ€å¥½ç”¨tlsï¼‰
    # ç”±äºè¿è¥å•†ä¼šæ ¹æ®tls://åŸŸåï¼Œå…¶ä¸­åŸŸåä¼šèµ°default-nameserverï¼ŒDNSæ˜æ–‡æŸ¥è¯¢ï¼Œè¿™é‡Œè¿è¥å•†ä¼šæ‹¦æˆªæ‰€æœ‰æµ·å¤–çš„DOT/DOHï¼ˆæœ‰æ¦‚ç‡ï¼‰
      # 1. åŸŸåæƒ…å†µä¸‹ï¼Œèµ°default-nameserverï¼Œæ­¤æ—¶DNSæ˜æ–‡æŸ¥DOT/DOHçš„åŸŸåï¼Œæœ‰æ¦‚ç‡ä¼šè¢«æ‹¦æˆªåŸŸå
      # 2. IPå½¢å¼ä¸‹ï¼Œä½¿ç”¨æµ·å¤–tls://8.8.4.4ä¹Ÿæœ‰å¯èƒ½æ‹¦æˆªIP
    # æ¨èï¼šå®šä¹‰ä¸¤ä¸ªDOTï¼Œä¸€ä¸ªå›½å†…ä¸€ä¸ªå›½å¤–
    - tls://223.5.5.5
    # - tls://one.one.one.one
    - tls://security.cloudflare-dns.com
  # ä¼˜å…ˆäºnameserver/fallbackè§„åˆ™
  nameserver-policy:
    'geosite:openai,google,anthropic,cloudflare': [1.0.0.1, 8.8.4.4] # å¤‡ç”¨ï¼štls://8.8.4.4, tls://1.0.0.1
    'geosite:cn': [119.29.29.29] # å¯¹å›½å†…geosite
    'rule-set:icloud,apple,direct,applications': [119.29.29.29]
    'geosite:gfw,greatfire': [tls://1.0.0.1, tls://8.8.4.4] # å¯¹geositeä¸­çš„gfwã€greatfire
    'rule-set:gfw': [tls://1.0.0.1, tls://8.8.4.4]
  # é»˜è®¤DNS
  nameserver:
    - 119.29.29.29
  # å›½å¤–DNS
  # fallback: 
  #   - 8.8.8.8
  #   - 1.1.1.1
  # fallback-filter:
  #   geoip: true
  #   geoip-code: CN
  #   ipcidr: # å½“DNSå“åº”ä¸ºipcidråŒ…å«çš„IPæ—¶ï¼Œå³æ„å‘³ç€è¢«è¯¥åŸŸåå¯¹åº”çš„IPå·²è¢«æ±¡æŸ“ï¼Œä¼šå†æ¬¡èµ°fallback DNSæŸ¥è¯¢ï¼Œå¾—åˆ°çœŸå®IP
  #     - ...

# GEOç›¸å…³å†…å®¹é»˜è®¤é‡‡ç”¨ https://github.com/Loyalsoldierå¼€å‘çš„
  # https://github.com/Loyalsoldier/v2ray-rules-dat

# å‚è€ƒï¼šhttps://github.com/Loyalsoldier/clash-rules?tab=readme-ov-file
rule-providers:
  reject:
    type: http
    behavior: domain
    url: "https://cdn.jsdelivr.net/gh/Loyalsoldier/clash-rules@release/reject.txt"
    path: ./ruleset/reject.yaml
    interval: 86400

  icloud:
    type: http
    behavior: domain
    url: "https://cdn.jsdelivr.net/gh/Loyalsoldier/clash-rules@release/icloud.txt"
    path: ./ruleset/icloud.yaml
    interval: 86400

  apple:
    type: http
    behavior: domain
    url: "https://cdn.jsdelivr.net/gh/Loyalsoldier/clash-rules@release/apple.txt"
    path: ./ruleset/apple.yaml
    interval: 86400

  google:
    type: http
    behavior: domain
    url: "https://cdn.jsdelivr.net/gh/Loyalsoldier/clash-rules@release/google.txt"
    path: ./ruleset/google.yaml
    interval: 86400

  proxy:
    type: http
    behavior: domain
    url: "https://cdn.jsdelivr.net/gh/Loyalsoldier/clash-rules@release/proxy.txt"
    path: ./ruleset/proxy.yaml
    interval: 86400

  direct:
    type: http
    behavior: domain
    url: "https://cdn.jsdelivr.net/gh/Loyalsoldier/clash-rules@release/direct.txt"
    path: ./ruleset/direct.yaml
    interval: 86400

  private:
    type: http
    behavior: domain
    url: "https://cdn.jsdelivr.net/gh/Loyalsoldier/clash-rules@release/private.txt"
    path: ./ruleset/private.yaml
    interval: 86400

  gfw:
    type: http
    behavior: domain
    url: "https://cdn.jsdelivr.net/gh/Loyalsoldier/clash-rules@release/gfw.txt"
    path: ./ruleset/gfw.yaml
    interval: 86400

  tld-not-cn:
    type: http
    behavior: domain
    url: "https://cdn.jsdelivr.net/gh/Loyalsoldier/clash-rules@release/tld-not-cn.txt"
    path: ./ruleset/tld-not-cn.yaml
    interval: 86400

  telegramcidr:
    type: http
    behavior: ipcidr
    url: "https://cdn.jsdelivr.net/gh/Loyalsoldier/clash-rules@release/telegramcidr.txt"
    path: ./ruleset/telegramcidr.yaml
    interval: 86400

  cncidr:
    type: http
    behavior: ipcidr
    url: "https://cdn.jsdelivr.net/gh/Loyalsoldier/clash-rules@release/cncidr.txt"
    path: ./ruleset/cncidr.yaml
    interval: 86400

  lancidr:
    type: http
    behavior: ipcidr
    url: "https://cdn.jsdelivr.net/gh/Loyalsoldier/clash-rules@release/lancidr.txt"
    path: ./ruleset/lancidr.yaml
    interval: 86400

  applications:
    type: http
    behavior: classical
    url: "https://cdn.jsdelivr.net/gh/Loyalsoldier/clash-rules@release/applications.txt"
    path: ./ruleset/applications.yaml
    interval: 86400

  # è‡ªå®šä¹‰çš„å¼€å‘ç›´è¿ç¯å¢ƒ
  dev-direct:
    type: http
    behavior: classical
    url: https://jybill.github.io/mihomo-config-rules/rule-set/dev-direct.yaml
    path: ./ruleset/dev-direct.yaml
    format: yaml
    interval: 86400

  daily-foreign:
    type: http
    behavior: classical
    url: https://jybill.github.io/mihomo-config-rules/rule-set/daily-foreign.yaml
    path: ./ruleset/daily-foreign.yaml
    format: yaml
    interval: 86400